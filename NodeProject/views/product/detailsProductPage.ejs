<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>NoobKey | Details Product</title>
    <meta name="description" content="">
    <meta name="author" content="">
    <!--===================== google fornt ===================================== -->
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,600,700' rel='stylesheet' type='text/css'>
    <!--  -->
    <!-- ==================== CSS ==============================================-->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="/package/lightslider/src/css/lightslider.css">
    <link rel="stylesheet" href="/api/css/pcss/keysetcolorcode.css">
    <!-- <link rel="stylesheet" type="text/css" href="/api/css/custom-fixed.css"> -->
    <link rel="stylesheet" href="/api/css/effect/navbar.css">
    <link rel="stylesheet" href="/api/css/effect/preloading.css">
    <link rel="stylesheet" type="text/css" href="product/css/proxypage/style.css">
    <link rel="stylesheet" href="/product/css/font-awesome/css/fontawesome-all.min.css">
    <!--  -->
    <!--==================== SCRIPT =========================================== -->
    <script src="/api/js/pjs/modernizr.js"></script>
    <% include ./../tips/cssPackage %>
</head>
<style type="text/css">
/* Generals resets and unimportant stuff */
* {
    margin: 0px;
    padding: 0px;
    box-sizing: border-box;
}

html,
body {
    font-family: "Montserrat", sans-serif !important;
    height: 100%;
    width: 100%;
    /*background-image: url('/api/docs/background/UIBkAT.jpg');*/
    background-repeat: no-repeat;
    background-color: transparent;
    box-sizing: border-box;
}

nav.navbar {
    z-index: 10;
    position: sticky;
    top: 0;
    background-image: url('/api/docs/background/UIBkAT.jpg');
    background-repeat: no-repeat;
    /* clip-path: polygon(0 13%, 99% 24%, 100% 92%, 17% 86%); */

}

.bg-dark {
    background-color: transparent !important;
    /* clip-path: polygon(50% 0%, 100% 0, 100% 61%, 30% 86%, 0 52%, 0 0); */
}

.before-breadcrumb {
    opacity: 0.91;
    position: relative;
    /*top: 1%;*/
    background-color: rgba(54, 58, 64, 0.3);
    background-image: url('/api/docs/background/UIBkAT.jpg');
    background-repeat: no-repeat;
    filter: brightness(150%);
    /* -webkit-box-shadow: -4px 1px 30px 3px rgba(61,38,61,0.79);
        -moz-box-shadow: -4px 1px 30px 3px rgba(61,38,61,0.79);
        box-shadow: -4px 1px 30px 3px rgba(61,38,61,0.79); */
}

.breadcrumb {
    max-width: 70%;
    margin: 0 auto;
    background-image: url('/api/docs/background/UIBkAT.jpg');
    background-repeat: no-repeat;
    background-color: transparent;

}

.row:first-child>.col-md-12 {
    display: flex;
}

.row {
    height: unset;
    position: relative;
    top: 5%;
}

.btn-submit {
    /*border-radius: 50px;
    min-width: 160px;*/
}

.footer-register {
    height: 10%;
}

@import "compass/css3";

.seperator-wrapper {
    width: 100%;
}

.seperator-wrapper .seperator {
    width: 100%;
    margin: 0 auto;
    height: 5px;
    animation: rotate 3s infinite linear;
    -webkit-animation: rotate 3s infinite linear;
}

@-webkit-keyframes rotate {
    from {
        background-position: -3000px;
    }

    to {
        background-position: 0px;
    }
}

@keyframes rotate {
    from {
        background-position: -3000px;
    }

    to {
        background-position: 0px;
    }
}

.gradient {
    background: #30ff90;
    /* Old browsers */
    background: -moz-linear-gradient(left, #30ff90 0%, #ed2ded 25%, #c99826 50%, #30ffe6 75%, #30ff90 100%);
    /* FF3.6+ */
    background: -webkit-gradient(linear, left top, right top, color-stop(0%, #30ff90), color-stop(25%, #ed2ded), color-stop(50%, #c99826), color-stop(75%, #30ffe6), color-stop(100%, #30ff90));
    /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(left, #30ff90 0%, #ed2ded 25%, #c99826 50%, #30ffe6 75%, #30ff90 100%);
    /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(left, #30ff90 0%, #ed2ded 25%, #c99826 50%, #30ffe6 75%, #30ff90 100%);
    /* Opera 11.10+ */
    background: -ms-linear-gradient(left, #30ff90 0%, #ed2ded 25%, #c99826 50%, #30ffe6 75%, #30ff90 100%);
    /* IE10+ */
    background: linear-gradient(to right, #30ff90 0%, #ed2ded 25%, #c99826 50%, #30ffe6 75%, #30ff90 100%);
    /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#30ff90', endColorstr='#30ff90', GradientType=1);
    /* IE6-9 */
}

ul.lSGallery>li>a>img {
    width: 40px !important;
    height: 30px !important
}

ul.lSGallery>li {
    width: unset !important;
    height: unset !important;
}

ul.item-details,
ul.item-timeline {
    list-style: none;
}

.w-50 {
    width: 50%
}

.w-10 {
    width: 10%;
}

.w-20 {
    width: 20%;
}

.w-25 {
    width: 25%;
}
.w-75 {
    width: 75%;
}

/*.main{
    margin: 2% 2% !important
}*/
</style>

<body id="top">
    <div id="preloader">
        <div id="loader" class="dots-jump">
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>
    <nav class="navbar navbar-expand-lg py-3 navbar-dark bg-dark shadow-sm">
        <div class="container">
            <a href="#" class="navbar-brand">
                <!-- Logo Image -->
                <img src="https://res.cloudinary.com/mhmd/image/upload/v1557368579/logo_iqjuay.png" width="45" alt="" class="d-inline-block align-middle mr-2">
                <!-- Logo Text -->
                <span class="text-uppercase font-weight-bold">Company</span>
            </a>
            <button type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler"><span class="navbar-toggler-icon"></span></button>
            <div id="navbarSupportedContent" class="collapse navbar-collapse">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item">
                        <a href="./" class="nav-link">Home
                            <span class="sr-only">(current)</span>
                        </a>
                    </li>
                    <li class="nav-item"><a href="#" class="nav-link">Proxy GrB</a></li>
                    <li class="nav-item"><a href="#" class="nav-link">Group Buy</a></li>
                    <li class="nav-item"><a href="#" class="nav-link">Services</a></li>
                    <li class="nav-item"><a href="#" class="nav-link">Contact</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <!-- </header> -->
    <nav class="before-breadcrumb" aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="#">Home</a></li>
            <li class="breadcrumb-item"><a href="#">Library</a></li>
            <li class="breadcrumb-item active" aria-current="page">Data</li>
        </ol>
    </nav>
    <section style="position: relative;" class="seperator-wrapper">
        <div class="seperator gradient">
        </div>
    </section>
    <!-- Breakcum-->
    <main class="main row">
        <!--  <div style="height: 75vh;" class="col-md-2">
            <sidebar class="sidebar">
            </sidebar>
        </div> -->
        <div style="" class="col-md-12">
            <div class="title-li">
                <p style="">Product details</p>
                <hr>
            </div>
            <article class="row">
                <div class="col-md-6 product-image">
                    <ul id="lightSlider">
                        <!-- <li data-thumb="http://sachinchoolur.github.io/lightslider/img/thumb/cS-1.jpg">
                                <img src="http://sachinchoolur.github.io/lightslider/img/cS-1.jpg" />
                            </li> -->
                        <% for(var key in detailsProduct) {%>
                        <li data-thumb="/api/<%= detailsProduct[key].pic_product.path %>">
                            <img  style="width: 100%; height: 100%" src="/api/<%= detailsProduct[key].pic_product.path %>" />
                        </li>
                        <% } %>
                    </ul>
                </div>
                <div class="col-md-6 product-info">
                    <h1><b>
                            <%= Category.category_name %></b></h1>
                    <div class="form-group product-author-host">
                        <span>Design by</span>&nbsp;<a href="#" style="color: red;font-size: 22px">
                            <%= Category.author %></a> - <span>Host by</span>&nbsp;<a style="font-size: 22px" href="#"><%= Category.proxy_host%></a>
                    </div>
                    <div class="form-group">
                        <a href="#">Shipping</a>&nbsp;<span>calculated at checkout.</span>
                    </div>
                    <div class="form-group product-status-w-price">
                        <% if(Category.status_gb == 0) { %>
                        <span style="padding:0 0.5%;background: #6c757D;color: white"><b>Group Buy End</b></span>
                        <% }else if(Category.status_gb == 1) { %>
                        <span style="padding:0 0.5%;background-color: #ffc107; color: white"><b>On Interest Check</b></span>
                        <% }else{ %>
                        <span style="padding:0 0.5%;background-color: #28A745; color: white"><b>Join Group Buy</b></span>
                        <% } %>
                        <!-- <div > -->
                        <span class="product-details-price">

                        </span>
                        <!-- </div> -->
                    </div>
                    <div class="form-group">
                        <b>Kit Options</b>
                        <div class="kit-option">
                            <form class="w-50">
                                <div style="display: flex;  " class="form-group main-select">
                                    <div class="form-group w-100">
                                        <label for="kit">Kit:</label>
                                        <select class="form-control select2" id="c-profile" name="profile">
                                            <% for( var i in detailsProduct){ %>
                                            <option value="<%= detailsProduct[i].product_id %>">
                                                <%= detailsProduct[i].product_name %>
                                            </option>
                                            <% } %>
                                        </select>
                                    </div>
                                    &nbsp;
                                
                                  <!--   <div class="form-group w-20">
                                        <label for="quantity">Quantity:</label>
                                        <input type="number" name="quantity" min="1" class="form-control" value="1" id="quantity" aria-describedby="quantity">
                                    </div> -->
                                </div>
                                
                                <button type="submit" id="btn-add" class="btn btn-outline-success btn-lg btn-block btn-join" data-id="<%= Category.category_id %>">Join group buy</button>
                                <button type="submit" id="btn-paypal" class="btn btn-warning btn-lg btn-block btn-cancel"> <span>Buy with
                                        <svg style="height: 18px; width: 63.4737px;" viewBox="0 0 67 19">
                                            <path d="M8.44.57H3.29a.718.718 0 0 0-.707.61L.502 14.517c-.041.263.16.5.425.5h2.458a.718.718 0 0 0 .707-.61l.561-3.597a.717.717 0 0 1 .706-.611h1.63c3.391 0 5.349-1.658 5.86-4.944.23-1.437.01-2.566-.657-3.357C11.461 1.029 10.162.57 8.44.57zm.594 4.87C8.752 7.308 7.34 7.308 5.976 7.308h-.777l.545-3.485a.43.43 0 0 1 .424-.366h.356c.93 0 1.807 0 2.26.535.27.32.353.794.25 1.45zm14.796-.06h-2.466a.43.43 0 0 0-.424.367l-.109.696-.172-.252c-.534-.783-1.724-1.044-2.912-1.044-2.725 0-5.052 2.084-5.505 5.008-.235 1.46.1 2.854.919 3.827.75.894 1.826 1.267 3.105 1.267 2.195 0 3.412-1.426 3.412-1.426l-.11.692a.432.432 0 0 0 .424.502h2.22a.718.718 0 0 0 .707-.61l1.333-8.526a.43.43 0 0 0-.423-.5zm-3.437 4.849c-.238 1.422-1.356 2.378-2.782 2.378-.716 0-1.288-.232-1.655-.672-.365-.436-.503-1.058-.387-1.75.222-1.41 1.359-2.397 2.763-2.397.7 0 1.269.235 1.644.678.375.448.524 1.073.417 1.763zM36.96 5.38h-2.478a.716.716 0 0 0-.592.318l-3.417 5.085-1.448-4.887a.719.719 0 0 0-.687-.515h-2.435a.433.433 0 0 0-.407.573l2.73 8.09-2.567 3.66a.434.434 0 0 0 .35.684h2.475a.712.712 0 0 0 .588-.31l8.24-12.016a.434.434 0 0 0-.352-.681z" style="fill: rgb(37, 59, 128);"></path>
                                            <path d="M45.163.57h-5.15a.717.717 0 0 0-.706.61l-2.082 13.337a.43.43 0 0 0 .423.5h2.642a.502.502 0 0 0 .494-.427l.591-3.78a.717.717 0 0 1 .706-.611h1.63c3.392 0 5.348-1.658 5.86-4.944.231-1.437.009-2.566-.657-3.357C48.183 1.029 46.886.57 45.163.57zm.593 4.87c-.28 1.867-1.692 1.867-3.057 1.867h-.777l.546-3.485a.429.429 0 0 1 .423-.366h.356c.93 0 1.807 0 2.26.535.27.32.353.794.25 1.45zm14.795-.06h-2.464a.428.428 0 0 0-.423.367l-.109.696-.173-.252c-.534-.783-1.723-1.044-2.911-1.044-2.724 0-5.05 2.084-5.504 5.008-.235 1.46.099 2.854.918 3.827.753.894 1.826 1.267 3.105 1.267 2.195 0 3.413-1.426 3.413-1.426l-.11.692a.432.432 0 0 0 .424.502h2.22a.717.717 0 0 0 .707-.61l1.333-8.526a.433.433 0 0 0-.426-.5zm-3.436 4.849c-.237 1.422-1.356 2.378-2.782 2.378-.714 0-1.288-.232-1.655-.672-.365-.436-.502-1.058-.387-1.75.223-1.41 1.359-2.397 2.763-2.397.7 0 1.269.235 1.644.678.377.448.526 1.073.417 1.763zM63.458.935l-2.113 13.582a.43.43 0 0 0 .423.5h2.124a.716.716 0 0 0 .707-.61L66.683 1.07a.432.432 0 0 0-.423-.5h-2.379c-.21 0-.39.156-.423.366z" style="fill: rgb(23, 155, 215);"></path>
                                        </svg>
                                    </span>
                                </button>
                            </form>
                        </div>
                    </div>
                    <div style="margin-top: 5%" class="product-details form-group">
                        <div class="product-details-specs">
                            <%- (Category.specs) %>
                        </div>
                        <ul class="item-details">
                            <h2>[Details]</h2>
                            <li><b>Manufacturing:</b> <span>
                                    <%= Category.manufacturing %></span></li>
                            <li><b>Designed by:</b> <span>
                                    <%= Category.author %></span></li>
                            <li><b>Material:</b> <span>
                                    <%= Category.c_material %></span></li>
                            <li><b>Profile:</b> <span>
                                    <%= Category.c_profile %></span></li>
                        </ul>
                        <ul class="item-timeline">
                            <h2>[Timeline]</h2>
                            <li><b>GB starts:</b> <span>
                                    <%= (Category.date_start).toLocaleDateString() %></span></li>
                            <li><b>GB ends:</b> <span>
                                    <%= (Category.date_end).toLocaleDateString() %></span></li>
                            <li><b>Last payment date: </b> <span>
                                    <%= (Category.date_payment).toLocaleDateString() %></span></li>
                        </ul>
                        <div class="product-total-kit">
                            <h2>[Kit Introduction]</h2>
                            <% for (var j in detailsProduct){ %>
                            <div class="form-group product-kit-detail">
                                <% if(detailsProduct[j].replace_product_name) { %>
                                <span>
                                    <%= detailsProduct[j].product_name %> -
                                    <%= detailsProduct[j].replace_product_name %></span>
                                <img class='img-zoomable' style="width: 100%" src="/api/<%= detailsProduct[j].pic_product.path %>">
                                <% }else{ %>
                                <span>
                                    <%= detailsProduct[j].product_name %></span>
                                <img class='img-zoomable' style="width: 100%" src="/api/<%= detailsProduct[j].pic_product.path %>">
                                <% } %>
                            </div>
                            <% } %>
                        </div>
                    </div>
                </div>
            </article>
        </div>
    </main>
    <!-- main-->
    <div class="footer-register center">
    </div>
</body>
<% include ./../tips/jsPackage %>
<!-- <script src="/nodemodules/zooming/build/zooming.min.js"></script> -->
<script type="text/javascript" src="/package/lightslider/src/js/lightslider.js"></script>
<script type="text/javascript" src="https://unpkg.com/zooming"></script>
<script type="text/javascript">
$(document).ready(function() {

    // document.addEventListener('DOMContentLoaded', function() {
    //     new Zooming({
    //     }).listen('.img-zoomable')
    // })
    new Zooming().listen('.img-zoomable')


    $('.btn-join').on('click', function(e){
        e.preventDefault();
        var id = $(this).attr('data-id');
        console.log(id);
        window.location.href = "/proxygb/payment/" + id;
    })
    var url = (window.location).href;
    var res = url.split("/").pop();
    console.log(res);
    $('#lightSlider').lightSlider({
        autoWidth: false,
        gallery: true,
        item: 1,
        loop: true,
        adaptiveHeight: true,
        slideMargin: 0,
        thumbItem: 9,
        // enableDrag: false,

        // gallery: true,
        // item: 1,
        // vertical: true,
        // verticalHeight:295,
        // vThumbWidth: 50,
        // thumbItem: 9,
        // thumbMargin: 4,
        // slideMargin: 0
    });

    $('#c-profile').val('');


    fetch('/api/product/getcid/' + res).then(function(response) {
        if (!response.ok) {
            throw Error(response.statusText);
        }
        return response.json();
    }).then(function(responseAsJson) {
        console.log(responseAsJson);
        var product = responseAsJson;

        // for (var key in product) {
        //     console.log(product[0]);
        //     $('#c-profile').val(product[0].product_name)
        //     $('#c-profile').trigger('change');
        // }

        // if()

        $('#c-profile').on('change', function() {
            // $('.product-details-price span').remove();
            for (var i in product) {
                if (this.value == product[i].product_id) {
                    if (product[i].outstock == 1) {
                        $('.product-details-price').html("$" + product[i].price + " USD")
                        // $("#btn-add, #btn-paypal").attr("disabled", false)
                        // $("#btn-paypal").attr("disabled", false)
                    } else {
                        $('.product-details-price').html("<span style='color: red'>Out stock</span>")

                        // $("#btn-add").attr("disabled", true)
                        // $("#btn-paypal").attr("disabled", true)
                    }

                }


            }
            // if(this.value == product[i].product_id){
            //     console.log(product[i].product_id)
            // }
        })
    })


    fetch('/api/category/getcid/' + res).then(function(response2nd) {
        if (!response2nd.ok) {
            throw Error(response2nd.statusText);
        }
        return response2nd.json();
    }).then(function(response2ndAsJson) {
        console.log(response2ndAsJson);
        var category = response2ndAsJson;
        console.log(category.status_gb);
        var status = category.status_gb;

        if(status == 0 || status == 1){
          
                        $("#btn-add, #btn-paypal").attr("disabled", true)
        }else{

        }






    })




})
</script>

</html>