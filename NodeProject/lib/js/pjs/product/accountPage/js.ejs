$(document).ready(function() {

    function setValueToTrue(cb){
        if(cb.checked){
            cb.value = "true"
        }else{
            cb.value = "false"
        }
    }
    var input = document.querySelector("#pnumber");
    window.intlTelInput(input, {
        utilsScript: "/package/intl-tel-input-master/build/js/utils.js"
    });
    $('#pnumber').on('input', function() {
        this.value = this.value
            .replace(/[^\d]/g, ''); // numbers and decimals only

    });

    // $('#checkbox-notification').prop('checked', true);

    fetch('/get_noti')
            .then(function(response) {

                if (!response.ok) {
                    throw Error(response.statusText);
                }
                // Read the response as json.
                return response.json();
            })
            .then(function(responseAsJson) {
                // Do stuff with the JSON

                var user = responseAsJson;
                
                $('#checkbox-notification').prop('checked', user.noti['get_noti']);

            })
            .catch(function(error) {
                console.log('Looks like there was a problem: \n', error);
            });
    $('#datepicker').datepicker();


    $('#datepicker').on('click', function(e) {
        e.preventDefault();
        // const date = ($('#datepicker').val()).split("/").reverse().join("/");
        const date = formatDate($('#datepicker').val())
        // var param = {'created': date};
        // console.log(JSON.stringify(param));
        console.log(date);
    });

    function formatDate(date) {
        var d = new Date(date),
            month = '' + (d.getMonth() + 1),
            day = '' + d.getDate(),
            year = d.getFullYear();

        if (month.length < 2)
            month = '0' + month;
        if (day.length < 2)
            day = '0' + day;

        return [year, month, day].join('/');
    }
})